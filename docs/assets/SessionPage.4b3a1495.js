import{_ as A,n as F,q as E,d as C,l as H,A as s,e as f,v as G,f as p,P as n,c as r,a as d,x as _,t as I,F as g,r as N,g as t,w as i,u as V,h as B,i as m,o as c,j as y}from"./index.35f621a1.js";import{s as u}from"./SessionsService.e8adb3a4.js";const D={setup(){const h=V(),a=B(),l=F({});return E(()=>{l.value=s.activeSession}),C(()=>{H(),s.activeSession=s.sessions.find(e=>e.id==h.params.id),s.activeGame=s.games.find(e=>e.id==s.activeSession.gameId)}),{players:f(()=>s.players.filter(e=>e.sessionId==s.activeSession.id)),game:f(()=>s.activeGame),session:f(()=>s.activeSession),addPlayer(){try{G.addPlayer(h.params.id)}catch(e){p.error(e),n.toast(e.message,"error")}},async archiveSession(){var e;try{((e=s.activeSession)==null?void 0:e.archived)==!1?await n.confirm("Archive Session and declare winner?","","Go for it!","info")&&(l.value.archived=!s.activeSession.archived,u.archiveSession(l.value),a.push({name:"Game",params:{id:s.activeSession.gameId}})):await n.confirm("Remove from archive and allow editing?","","Yes, please.","info")&&(l.value.archived=!s.activeSession.archived,u.archiveSession(l.value))}catch(S){p.error(S),n.toast(S.message,"error")}},async deleteSession(){try{await n.confirm("Delete Session?")&&(a.push({name:"Game",params:{id:s.activeSession.gameId}}),u.deleteSession(s.activeSession.id),n.toast("Session deleted","success"))}catch(e){p.error(e),n.toast(e.message,"error")}}}}},M={class:"session container-fluid"},R={class:"row"},j={class:"col-12 d-flex justify-content-between p-2"},q={key:0,class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#player-add"},L={class:"text-center"},T={key:1},Y={class:"row"},z=y("Add Player"),J=y("Edit Player?"),K=y("Add Hand"),O=y("Edit Hand?");function Q(h,a,l,e,S,U){const b=m("Player"),P=m("AddPlayerForm"),v=m("Modal"),w=m("EditPlayerForm"),k=m("AddHandForm"),x=m("EditHandForm");return c(),r(g,null,[d("div",M,[d("div",R,[d("div",j,[e.session.archived==!1?(c(),r("button",q," Add Player ")):_("",!0),d("div",L,[d("h2",null,I(e.game.title),1)]),e.session.archived==!1?(c(),r("div",T,[e.players.length>0?(c(),r("button",{key:0,class:"btn btn-warning",onClick:a[0]||(a[0]=(...o)=>e.archiveSession&&e.archiveSession(...o))}," Complete session? ")):_("",!0),d("i",{class:"mdi mdi-delete text-danger selectable ms-2",title:"Delete session",onClick:a[1]||(a[1]=(...o)=>e.deleteSession&&e.deleteSession(...o))})])):_("",!0),e.session.archived==!0?(c(),r("i",{key:2,class:"mdi mdi-pencil text-warning selectable",title:"Edit Session",onClick:a[2]||(a[2]=(...o)=>e.archiveSession&&e.archiveSession(...o))})):_("",!0)])]),d("div",Y,[(c(!0),r(g,null,N(e.players,o=>(c(),r("div",{class:"col-6 col-sm-4 col-lg-2",key:o.id},[t(b,{player:o},null,8,["player"])]))),128))])]),t(v,{id:"player-add"},{title:i(()=>[z]),body:i(()=>[t(P)]),_:1}),t(v,{id:"player-edit"},{title:i(()=>[J]),body:i(()=>[t(w)]),_:1}),t(v,{id:"add-hand"},{title:i(()=>[K]),body:i(()=>[t(k)]),_:1}),t(v,{id:"edit-hand"},{title:i(()=>[O]),body:i(()=>[t(x)]),_:1})],64)}const Z=A(D,[["render",Q]]);export{Z as default};
